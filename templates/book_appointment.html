{% extends "base.html" %}
{% block title %}Book Appointment{% endblock %}
{% block content %}
<h2 class="mb-3">Doctor's Availability</h2>
<div class="card mb-3">
  <div class="card-body">
    <h5 class="card-title">Dr. {{ doctor.name }} â€” {{ doctor.department.name }}</h5>
    <p class="mb-0 small">Specialization: {{ doctor.specialization }} | Experience: {{ doctor.experience }} years</p>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table align-middle">
        <thead>
          <tr><th style="width:16%">Date</th><th>Available Slots</th></tr>
        </thead>
        <tbody>
          {% for day in week %}
            <tr>
              <td><span class="badge bg-secondary fs-6">{{ day.date.strftime('%d/%m/%Y') }}</span></td>
              <td>
                {% if day.slots %}
                  <div class="d-flex flex-wrap gap-2">
                    {% for s in day.slots %}
                      <form method="POST" class="d-inline">
                        <input type="hidden" name="date" value="{{ day.date.strftime('%Y-%m-%d') }}">
                        <input type="hidden" name="time" value="{{ s }}">
                        <button type="submit" class="btn btn-sm btn-outline-success slot-btn">{{ s }}</button>
                      </form>
                    {% endfor %}
                  </div>
                {% else %}
                  <span class="badge bg-danger-subtle text-danger border border-danger">No slots available to book</span>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <a href="{{ url_for('patient_dashboard') }}" class="btn btn-secondary">Back</a>
  </div>
</div>
{% endblock %}
